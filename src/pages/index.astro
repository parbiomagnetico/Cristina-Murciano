---
import BaseLayout from "../layouts/BaseLayout.astro";
import Nav from "../components/Nav.astro";
import EnergyComposition from "../components/EnergyComposition.astro";
import Footer from "../components/Footer.astro";
import services from "../data/services.json";
import content from "../data/content.json";
import reviews from "../data/reviews.json";
import posts from "../data/posts.json";

const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/assets/images/*.{png,webp,jpg,jpeg}",
	{ eager: true },
);

// Get latest 3 reviews (sorted by date desc)
const latestReviews = [...reviews]
	.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())
	.slice(0, 3);

// Get latest 3 blog posts (sorted by date desc)
const latestPosts = [...posts]
	.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())
	.slice(0, 3);
---

<BaseLayout
	title={`Masajes y Terapias Hol√≠sticas en Monz√≥n | ${content.company.name}`}
>
	<Nav />

	<main>
		<EnergyComposition />

		<!-- Intro Section with SEO Keywords -->
		<section class="pt-12 pb-8 px-6 max-w-4xl mx-auto text-center reveal">
			<h2 class="text-4xl md:text-5xl font-serif text-gray-800 mt-4 mb-6">
				Terapias Naturales y <span class="holographic-text"
					>Masajes</span
				> en Monz√≥n
			</h2>
			<p
				class="text-gray-600 font-light text-lg leading-relaxed max-w-3xl mx-auto"
			>
				Bienvenido/a a mi espacio de bienestar en <strong
					>Monz√≥n (Huesca)</strong
				>. Ofrezco tratamientos personalizados de <strong
					>masaje terap√©utico</strong
				>, <strong>reflexolog√≠a podal</strong>, <strong
					>drenaje linf√°tico</strong
				> y terapias hol√≠sticas como el <strong>par biomagn√©tico</strong
				> y <strong>Reiki</strong>. Mi objetivo es ayudarte a recuperar
				el equilibrio f√≠sico y emocional a trav√©s de t√©cnicas naturales
				adaptadas a tus necesidades.
			</p>
		</section>

		<!-- Services Section -->
		<section class="py-12 px-6 max-w-7xl mx-auto reveal">
			<div class="text-center mb-16">
				<h2 class="text-4xl font-serif text-gray-800 mb-6">
					Mis Tratamientos
				</h2>
				<div
					class="w-24 h-1 bg-gradient-to-r from-teal-300 to-lilac-300 mx-auto rounded-full"
				>
				</div>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				{
					services.slice(0, 3).map((service) => {
						const imageSrc =
							images[`/src/assets/images/${service.image}`]
								?.default;
						return (
							<article class="glass-panel rounded-3xl overflow-hidden hover:-translate-y-2 cursor-pointer group flex flex-col transition-all duration-300">
								<!-- Image Container -->
								<div class="w-full h-56 overflow-hidden relative">
									{imageSrc && (
										<img
											src={imageSrc.src}
											alt={service.title}
											class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
										/>
									)}
									<div class="absolute inset-0 bg-gradient-to-t from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
								</div>
								
								<!-- Content Container -->
								<div class="p-8 flex flex-col items-center text-center flex-grow">
									<h3 class="text-2xl font-serif mb-4 text-gray-800 group-hover:text-teal-600 transition-colors">
										{service.title}
									</h3>
									<p class="text-gray-500 font-light mb-6 line-clamp-3 text-sm leading-relaxed">
										{service.shortDescription}
									</p>
									<a
										href="/tratamientos"
										class="text-teal-600 font-medium hover:text-lilac-600 transition-colors mt-auto inline-flex items-center gap-1"
									>
										Saber m√°s <span class="text-lg">‚Üí</span>
									</a>
								</div>
							</article>
						);
					})
				}
			</div>

			<div class="text-center mt-12">
				<a
					href="/tratamientos"
					class="inline-flex items-center px-8 py-3 rounded-full border border-lilac-300 text-lilac-600 hover:bg-lilac-50 transition-colors font-medium"
				>
					Ver todos los tratamientos
				</a>
			</div>
		</section>

		<section class="py-12 px-6 reveal">
			<div
				class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-center"
			>
				<div class="order-2 md:order-1">
					<span
						class="text-teal-600 font-medium tracking-widest uppercase text-sm"
						>Sobre M√≠</span
					>
					<h2
						class="text-3xl md:text-4xl font-serif text-gray-800 mt-4 mb-6"
					>
						M√°s de 20 a√±os cuidando de tu bienestar
					</h2>
					<p class="text-gray-600 font-light leading-relaxed mb-6">
						Soy <strong>Cristina Murciano</strong>, terapeuta
						hol√≠stica con m√°s de dos d√©cadas de experiencia en el
						mundo del masaje y las terapias naturales. Mi pasi√≥n es
						acompa√±arte en tu camino hacia el equilibrio, utilizando
						t√©cnicas que combinan tradici√≥n y conocimiento para
						ofrecerte un cuidado integral.
					</p>
					<p class="text-gray-600 font-light leading-relaxed mb-8">
						Cada persona es √∫nica, por eso adapto cada sesi√≥n a tus
						necesidades espec√≠ficas, ya sea para aliviar tensiones
						musculares, mejorar la circulaci√≥n o trabajar el
						bienestar emocional.
					</p>
					<a
						href="/sobre-mi"
						class="inline-flex items-center text-teal-600 font-medium hover:text-lilac-600 transition-colors"
					>
						Conoce mi historia completa ‚Üí
					</a>
				</div>
				<div class="order-1 md:order-2 flex justify-center">
					<div class="relative w-full max-w-md">
						<div class="glass-panel p-3 rounded-[3rem] hover:-translate-y-2 transition-all duration-500 group relative z-10 shadow-xl shadow-teal-900/5">
							<div class="w-full aspect-[4/5] rounded-[2rem] overflow-hidden relative border border-white/20">
								{
									images["/src/assets/images/cristina.png"]
										?.default && (
										<img
											src={
												images[
													"/src/assets/images/cristina.png"
												].default.src
											}
											alt="Cristina Murciano"
											class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
										/>
									)
								}
								<div class="absolute inset-0 bg-gradient-to-t from-teal-900/10 to-transparent"></div>
							</div>
						</div>
						
						<!-- Decorative element behind image -->
						<div class="absolute -bottom-6 -right-6 w-32 h-32 bg-lilac-200/50 rounded-full blur-3xl -z-10 animate-pulse-slow"></div>
						<div class="absolute -top-10 -left-10 w-48 h-48 bg-teal-100/40 rounded-full blur-[80px] -z-10"></div>
					</div>
				</div>

			</div>
		</section>

		<!-- Testimonials Preview -->
		<section class="py-12 px-6 max-w-7xl mx-auto reveal">
			<div class="text-center mb-16">
				<span
					class="text-lilac-600 font-medium tracking-widest uppercase text-sm"
					>Opiniones</span
				>
				<h2 class="text-4xl font-serif text-gray-800 mt-4 mb-6">
					Lo que dicen mis pacientes
				</h2>
				<div
					class="w-24 h-1 bg-gradient-to-r from-teal-300 to-lilac-300 mx-auto rounded-full"
				>
				</div>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				{
					latestReviews.map((review) => (
						<div class="glass-panel rounded-3xl p-8">
							<div class="flex items-center gap-4 mb-6">
								<div class="w-12 h-12 rounded-full bg-lilac-100 flex items-center justify-center text-lilac-600 font-bold text-lg">
									{review.author.charAt(0).toUpperCase()}
								</div>
								<div>
									<h4 class="font-serif text-gray-900">
										{review.author}
									</h4>
									<span class="text-xs text-gray-400">
										{review.date}
									</span>
								</div>
							</div>
							<div class="mb-4 text-lilac-400 text-sm">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
							<p class="text-gray-600 font-light text-sm line-clamp-4">
								"{review.content}"
							</p>
						</div>
					))
				}
			</div>

			<div class="text-center mt-12">
				<a
					href="/opiniones"
					class="inline-flex items-center px-8 py-3 rounded-full border border-lilac-300 text-lilac-600 hover:bg-lilac-50 transition-colors font-medium"
				>
					Ver todas las opiniones ({reviews.length})
				</a>
			</div>
		</section>

		<!-- Blog Preview -->
		<section class="py-12 px-6 reveal">
			<div class="max-w-7xl mx-auto">
				<div class="text-center mb-16">
					<span
						class="text-teal-600 font-medium tracking-widest uppercase text-sm"
						>Blog</span
					>
					<h2 class="text-4xl font-serif text-gray-800 mt-4 mb-6">
						√öltimos art√≠culos
					</h2>
					<div
						class="w-24 h-1 bg-gradient-to-r from-teal-300 to-lilac-300 mx-auto rounded-full"
					>
					</div>
				</div>

				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					{
						latestPosts.map((post) => {
							const imageSrc =
								images[`/src/assets/images/${post.image}`]
									?.default;
							return (
								<a
									href={`/blog/${post.slug}`}
									class="group glass-panel rounded-3xl overflow-hidden hover:-translate-y-2 transition-all duration-300 block"
								>
									<div class="aspect-video bg-gray-200 relative overflow-hidden">
										{imageSrc && (
											<img
												src={imageSrc.src}
												alt={post.title}
												class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
											/>
										)}
									</div>
									<div class="p-6">
										<span class="text-xs font-semibold text-teal-600 uppercase tracking-wider mb-2 block">
											{post.date}
										</span>
										<h3 class="text-xl font-serif text-gray-800 mb-2 group-hover:text-lilac-600 transition-colors line-clamp-2">
											{post.title}
										</h3>
										<p class="text-gray-500 font-light text-sm line-clamp-2">
											{post.excerpt}
										</p>
									</div>
								</a>
							);
						})
					}
				</div>

				<div class="text-center mt-12">
					<a
						href="/blog"
						class="inline-flex items-center px-8 py-3 rounded-full border border-teal-300 text-teal-600 hover:bg-teal-50 transition-colors font-medium"
					>
						Ver todos los art√≠culos
					</a>
				</div>
			</div>
		</section>

		<!-- Local SEO / Location Section -->
		<section class="py-16 px-6 reveal">
			<div class="max-w-5xl mx-auto">
				<div class="glass-panel rounded-[3rem] p-8 md:p-12 overflow-hidden relative group">
					<!-- Background glow internal to card -->
					<div class="absolute top-0 right-0 w-64 h-64 bg-teal-100/30 rounded-full blur-3xl -z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>

					<div class="grid md:grid-cols-2 gap-12 items-center relative z-10">
						<div class="text-center md:text-left">
							<span class="text-xs font-semibold text-teal-600 uppercase tracking-widest mb-3 block">Ubicaci√≥n</span>
							<h2 class="text-3xl md:text-4xl font-serif text-gray-800 mb-6">Estamos en el coraz√≥n de <br class="hidden md:block"/><span class="text-teal-600 italic">Monz√≥n</span></h2>
							
							<div class="space-y-6">
								<div class="flex items-center gap-4 justify-center md:justify-start">
									<div class="w-10 h-10 rounded-full bg-teal-50 flex items-center justify-center text-teal-600">
										<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
										</svg>
									</div>
									<p class="text-gray-700 font-medium">{content.company.address}</p>
								</div>

								<div class="flex items-center gap-4 justify-center md:justify-start">
									<div class="w-10 h-10 rounded-full bg-lilac-50 flex items-center justify-center text-lilac-600">
										<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
										</svg>
									</div>
									<p class="text-gray-600 font-light">Atenci√≥n exclusiva con cita previa</p>
								</div>
							</div>

							<div class="mt-10 flex flex-wrap gap-4 justify-center md:justify-start">
								<a
									href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(content.company.address)}`}
									target="_blank"
									rel="noopener noreferrer"
									class="px-8 py-3 bg-gray-900 text-white rounded-full font-medium hover:bg-teal-600 transition-colors shadow-lg"
								>
									Abrir en Google Maps
								</a>
								<a
									href="#contact"
									class="px-8 py-3 border border-gray-200 rounded-full font-medium hover:border-teal-400 text-gray-700 transition-all"
								>
									Contactar ahora
								</a>
							</div>
						</div>

						<div class="relative h-64 md:h-[400px] w-full rounded-[2.5rem] overflow-hidden group shadow-2xl shadow-teal-900/10 border border-white/40">
							<!-- Live Map -->
							<iframe
								src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2979.7905!2d0.1903!3d41.9080!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a0ed8148b30e83%3A0x6b97d39de675878!2sPlaza%20Mar%C3%ADa%20Moliner%2C%2014%2C%2022400%20Monz%C3%B3n%2C%20Huesca!5e0!3m2!1ses!2ses!4v1706800000000!5m2!1ses!2ses"
								class="w-full h-full grayscale-[0.5] contrast-[1.2] transition-all duration-1000 scale-[1.02] group-hover:scale-100 group-hover:grayscale-0"
								style="border:0;"
								allowfullscreen=""
								loading="lazy"
								referrerpolicy="no-referrer-when-downgrade"
							></iframe>
							
							<!-- Professional Gradient Tint Overlay (Teal to Lilac) -->
							<div class="absolute inset-0 bg-gradient-to-br from-teal-600/40 to-lilac-500/40 mix-blend-color pointer-events-none group-hover:opacity-0 transition-opacity duration-700"></div>
							<div class="absolute inset-0 bg-gradient-to-t from-teal-900/20 via-transparent to-lilac-900/10 pointer-events-none group-hover:opacity-0 transition-opacity duration-700"></div>

							<!-- Floating Badge -->
							<div class="absolute top-6 left-6 glass-panel py-2 px-4 rounded-full text-xs font-semibold text-teal-700 backdrop-blur-sm border-white/50 pointer-events-none group-hover:opacity-0 transition-opacity duration-500">
								üìç Plaza Mar√≠a Moliner, 14
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<Footer />
</BaseLayout>
